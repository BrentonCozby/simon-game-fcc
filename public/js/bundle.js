(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";var _updateUi=require("./_update-ui.js");var _updateUi2=_interopRequireDefault(_updateUi);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var mainButtonsUI=_updateUi2.default.mainButtons;(function _gameLogic(){"use strict";var state={power:"off",sequence:[],strict:"off",count:0,humanTurn:false,crawler:0,loser:false};function stateChangeEvent(body){var event=new CustomEvent("stateChanged",{detail:body});return event}function simonAddStep(){var color=null;if(Math.random()*4<1)color="green";else if(Math.random()*4<2)color="red";else if(Math.random()*4<3)color="yellow";else if(Math.random()*4<=4)color="blue";document.dispatchEvent(stateChangeEvent({sequence:color}))}function playSequence(addStep){document.dispatchEvent(stateChangeEvent({humanTurn:false}));if(addStep){simonAddStep()}state.sequence.forEach(function(color,index){window.setTimeout(function(){mainButtonsUI[color].mousedown()},700*(index+1));window.setTimeout(function(){mainButtonsUI[color].mouseup();if(index===state.sequence.length-1){_updateUi2.default.renderCount(state);document.dispatchEvent(stateChangeEvent({humanTurn:true}));document.dispatchEvent(new Event("donePlayingSequence"))}},700*(index+1)+200)})}var start={mouseup:function mouseup(){document.dispatchEvent(stateChangeEvent({sequence:"reset",count:"reset",crawler:"reset",loser:false}));playSequence(true)}};var strict={mouseup:function mouseup(){var event=stateChangeEvent({strict:"toggle"});document.dispatchEvent(event)}};var onOff={onclick:function onclick(){var event=stateChangeEvent({power:"toggle",sequence:"reset",strict:"reset",count:"reset"});document.dispatchEvent(event)}};var mainButtons={mouseup:function mouseup(color){if(state.sequence[state.crawler]!==color){window.setTimeout(_updateUi2.default.buzzer,70);if(state.strict==="on"){document.dispatchEvent(stateChangeEvent({loser:true}))}else{document.dispatchEvent(stateChangeEvent({crawler:"reset"}));window.setTimeout(function(){playSequence(false)},700)}return false}if(state.crawler===state.sequence.length-1){document.dispatchEvent(stateChangeEvent({count:"increment"}));_updateUi2.default.renderCount(state);window.setTimeout(function(){playSequence(true)},600);document.dispatchEvent(stateChangeEvent({crawler:"reset"}));return false}document.dispatchEvent(stateChangeEvent({crawler:"increment"}))}};function onStateChange(detail){for(var prop in detail){if(!state.hasOwnProperty(prop))return false;var value=detail[prop];switch(prop){case"power":if(value==="reset")state.power="off";else if(state.power==="off")state.power="on";else state.power="off";break;case"sequence":if(value==="reset")state.sequence=[];else if(!state.humanTurn)state.sequence.push(value);break;case"strict":if(value==="reset")state.strict="off";else if(state.strict==="off")state.strict="on";else state.strict="off";break;case"count":if(value==="reset")state.count=0;else state.count++;break;case"humanTurn":state.humanTurn=value;break;case"crawler":if(value==="reset")state.crawler=0;else state.crawler++;break;case"loser":state.loser=value;break;default:console.log("switch statement could not match case:\n\t"+prop+": "+value)}}}module.exports.start=start;module.exports.strict=strict;module.exports.onOff=onOff;module.exports.state=state;module.exports.onStateChange=onStateChange;module.exports.mainButtons=mainButtons})()},{"./_update-ui.js":2}],2:[function(require,module,exports){"use strict";(function _updateUI(){"use strict";var countDisplay=$("#count-display");function renderCount(currentState){if(String(currentState.count).length<2)countDisplay.html("0"+currentState.count);else countDisplay.html(currentState.count)}function buzzer(){var buzzer=document.getElementById("buzzer");buzzer.currentTime=0;buzzer.play()}var start={element:$("#start-button"),mouseup:function mouseup(currentState){renderCount(currentState)}};var strict={element:$("#strict-button"),mouseup:function mouseup(currentState){if(currentState.strict==="on")strict.element.addClass("on");else strict.element.removeClass("on")}};var onOff={element:$("#on-off-button"),onclick:function onclick(currentState){if(currentState.power==="on"){onOff.element.addClass("on");start.element.addClass("on");renderCount(currentState)}else{onOff.element.removeClass("on");start.element.removeClass("on");strict.element.removeClass("on active");countDisplay.html("&nbsp;&nbsp;")}}};var MainButton=function MainButton(color,note){this.element=$("#button-"+color);this.audio=document.getElementById(note+"-audio")};MainButton.prototype.mousedown=function(){this.audio.currentTime=0;this.audio.play();this.element.addClass("pressed")};MainButton.prototype.mouseup=function(){this.element.removeClass("pressed")};var mainButtons={green:new MainButton("green","c"),red:new MainButton("red","e"),yellow:new MainButton("yellow","g"),blue:new MainButton("blue","a")};var onDonePlayingSequence=function onDonePlayingSequence(currentState){renderCount(currentState)};module.exports.renderCount=renderCount;module.exports.buzzer=buzzer;module.exports.start=start;module.exports.strict=strict;module.exports.onOff=onOff;module.exports.mainButtons=mainButtons;module.exports.onDonePlayingSequence=onDonePlayingSequence})()},{}],3:[function(require,module,exports){"use strict";var _gameLogic=require("./_game-logic.js");var _gameLogic2=_interopRequireDefault(_gameLogic);var _updateUi=require("./_update-ui.js");var _updateUi2=_interopRequireDefault(_updateUi);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(function main(){"use strict";$(document).on("stateChanged",function(e){_gameLogic2.default.onStateChange(e.originalEvent.detail)});$(document).on("donePlayingSequence",function(){_updateUi2.default.onDonePlayingSequence(_gameLogic2.default.state)});var startBtn=$("#start-button");var strictBtn=$("#strict-button");var onOffBtn=$("#on-off-button");startBtn.on("mouseup",function(){if(_gameLogic2.default.state.power==="off")return false;_gameLogic2.default.start.mouseup();_updateUi2.default.start.mouseup(_gameLogic2.default.state)});strictBtn.on("mouseup",function(){if(_gameLogic2.default.state.power==="off")return false;_gameLogic2.default.strict.mouseup();_updateUi2.default.strict.mouseup(_gameLogic2.default.state)});onOffBtn.on("click",function(){_gameLogic2.default.onOff.onclick();_updateUi2.default.onOff.onclick(_gameLogic2.default.state)});var buttonsUI=_updateUi2.default.mainButtons;var buttonsGL=_gameLogic2.default.mainButtons;var _loop=function _loop(color){if(buttonsUI.hasOwnProperty(color)){buttonsUI[color].element.on("mousedown",function(){if(_gameLogic2.default.state.power==="off"||_gameLogic2.default.state.humanTurn===false||_gameLogic2.default.state.loser===true)return false;buttonsUI[color].mousedown()});buttonsUI[color].element.on("mouseup",function(){if(_gameLogic2.default.state.power==="off"||_gameLogic2.default.state.humanTurn===false||_gameLogic2.default.state.loser===true)return false;buttonsUI[color].mouseup();buttonsGL.mouseup(color)})}};for(var color in buttonsUI){_loop(color)}})()},{"./_game-logic.js":1,"./_update-ui.js":2}]},{},[3]);